axios.defaults.showLoader = !0; var vm = new Vue({ el: "#app", data: function () { return { show: !1, hover: !1, darkMode: !1, active: !1, NextDropdownVisible: !1, value: 5, flycartfirstload: !0, PopupAddToCartVueModal: null, PopupQuickViewVueModal: null, index: null, RelatedProducts: null, compareproducts: null, compareProductsQty: 0, loader: !1 } }, props: { flycart: null, flycartitems: null, flycartindicator: void 0, flywish: null, wishlistitems: null, wishindicator: void 0, UpdatedShoppingCartItemId: null }, mounted: function () { "true" == localStorage.fluid && (this.fluid = "fluid"), "fluid" == localStorage.fluid && (this.fluid = "fluid"), "" == localStorage.fluid && (this.fluid = "false"), "true" == localStorage.darkMode && (this.darkMode = !0), this.wishindicator = parseInt(this.$refs.wishlistQty.innerText), this.updateCompareProductsQty(), this.backToTop() }, watch: { fluid: function (e) { localStorage.fluid = e }, darkMode: function (e) { localStorage.darkMode = e }, PopupQuickViewVueModal: function () { vm.getLinkedProductsQV(vm.PopupQuickViewVueModal.Id) } }, created: function () { axios.interceptors.request.use((e => { e.showLoader && (document.getElementById("app").setAttribute("v-cloak", !0), document.querySelector(".page-loader-container").classList.add("axios-request")); return e }), (e => (e.config.showLoader && document.getElementById("app").removeAttribute("v-cloak"), Promise.reject(e)))), axios.interceptors.response.use((e => (e.config.showLoader && document.getElementById("app").removeAttribute("v-cloak"), e)), (e => (e.response.config.showLoader && document.getElementById("app").removeAttribute("v-cloak"), Promise.reject(e)))) }, methods: { backToTop() { if (!document.querySelector(".up-btn")) { const e = document.createElement("div"), t = document.createElement("div"); e.classList.add("up-btn", "up-btn__hide"), document.body.append(e), e.append(t), window.addEventListener("scroll", (() => { var t; t = 400, document.documentElement.scrollTop >= t ? e.classList.remove("up-btn__hide") : e.classList.add("up-btn__hide") })), e.addEventListener("click", (() => { window.scrollTo({ top: 0, behavior: "smooth" }) })) } }, newsletterBox(e, t) { let a; a = !e || this.$refs.newsletterSubscribe.checked; var o = { subscribe: a, email: document.getElementById("newsletter-email").value }; axios({ url: t, params: o, method: "post" }).then((function (e) { let t, a = e.data.Result, o = e.data.ResultCategory, i = e.data.Showcategories; t = e.data.Success ? "info" : "danger", vm.$bvToast.toast(a, { variant: t, autoHideDelay: 3500, solid: !0 }), i && vm.displayPopup(o, "ModalNewsletterCategory") })) }, newsletterSubscribeCategory(e) { let t = document.getElementById("newsletter-category-method-form"), a = new FormData(t); axios({ url: e, method: "post", data: a }).then((function (e) { e.data.Success || alert(e.data.Message) })).catch((function (e) { alert(e) })) }, getPrivacyPreference(e) { axios({ url: e, method: "get" }).then((function (e) { vm.displayPopup(e.data.html, "ModalPrivacyPreference") })).catch((function (e) { alert(e) })) }, savePrivacyPreference(e) { let t = document.getElementById("frmPrivacyPreference"), a = new FormData(t); axios({ url: e, method: "post", data: a }).catch((function (e) { alert(e) })) }, displayPopup(e, t) { new Vue({ el: "#" + t, data: { template: null }, render: function (e) { return this.template ? this.template() : e("b-overlay", { attrs: { show: "true" } }) }, methods: { showModal: function () { this.$refs[t].show() } }, mounted: function () { this.template = Vue.compile(e).render, this.darkMode = vm.darkMode }, updated: function () { this.showModal() } }) }, displayBarNotification(e, t, a, o) { var i; i = "error" == a ? "danger" : "info", this.$bvToast.toast(e, { title: a, variant: i, href: t, autoHideDelay: o, solid: !0 }) }, deletecartitem: function (e) { return axios({ method: "post", baseURL: e }).then((function (e) { const t = e.data.sidebarshoppingcartmodel; vm.flycart = t, vm.flycartitems = t.Items, vm.flycartindicator = t.TotalProducts })).catch((function (e) { alert(e) })), !1 }, updateCompareProductsQty: function () { const e = AxiosCart.getCookie("Grand.CompareProduct"); if ("" !== e) { const t = e.split("|").filter(Boolean).length; this.compareProductsQty = t } else this.compareProductsQty = 0 }, updateSidebarShoppingCart: function (e) { axios({ baseURL: e, method: "get", data: null, headers: { Accept: "application/json", "Content-Type": "application/json" }, showLoader: !1 }).then((e => (this.flycart = e.data, this.flycartitems = e.data.Items, this.flycartindicator = e.data.TotalProducts, this.flycartfirstload = !1))) }, updateWishlist: function (e) { axios({ baseURL: e, method: "get", data: null, headers: { Accept: "application/json", "Content-Type": "application/json" }, showLoader: !1 }).then((e => (this.loader = !1, this.flywish = e.data, this.wishlistitems = e.data.Items, this.wishindicator = e.data.Items.length))) }, getCompareList: function (e) { this.loader = !0, axios({ baseURL: e, method: "get", params: { t: (new Date).getTime() }, data: null, headers: { Accept: "application/json", "Content-Type": "application/json" }, showLoader: !1 }).then((e => { this.loader = !1, this.compareproducts = e.data })) }, removeFromCompareList: function (e, t) { if (void 0 !== e) { const a = AxiosCart.getCookie("Grand.CompareProduct").replace(e, ""); AxiosCart.setCookie("Grand.CompareProduct", a), vm.compareproducts.Products.splice(t, 1) } else AxiosCart.setCookie("Grand.CompareProduct", ""), vm.compareproducts.Products.splice(0); this.updateCompareProductsQty() }, showModalOutOfStock: function () { this.$refs["out-of-stock"].show() }, productImage: function (e) { var t = e.target.parentElement.getAttribute("data-href"); function a(e, t) { for (var a = 0, o = e.length; a < o; a++)if (e[a] == t) return !0; return !1 } var o = function (e, t) { for (var o = document.querySelectorAll(t), i = e.parentNode; i && !a(o, i);)i = i.parentNode; return i }(e.target, ".product-box"); o.querySelectorAll(".main-product-img")[0].setAttribute("src", t) }, formSubmit() { vm.$refs.form.submit() }, formSubmitParam(e, observer) { e && observer && observer.validate().then((success => { if (success) { var submitter = e.target.querySelector('[type="submit"]'); eval(submitter.dataset.form) } })) }, isMobile: function () { return void 0 !== window.orientation || -1 !== navigator.userAgent.indexOf("IEMobile") }, attrchange: function (e, t) { var a, o = document.getElementById("product-details-form"), i = new FormData(o); a = vm.PopupQuickViewVueModal.ProductBundleModels.length > 0 ? vm.PopupQuickViewVueModal.Id : e, axios({ url: "/product/productdetails_attributechange?productId=" + a + "&loadPicture=" + t, data: i, method: "post", params: { product: a } }).then((function (e) { if (vm.PopupQuickViewVueModal.ProductBundleModels.length > 0) e.data.price && (vm.PopupQuickViewVueModal.ProductPrice.Price = e.data.price); else { if (e.data.price && (0 == vm.PopupQuickViewVueModal.ProductType ? null != vm.PopupQuickViewVueModal.ProductPrice.PriceWithDiscount ? vm.PopupQuickViewVueModal.ProductPrice.PriceWithDiscount = e.data.price : vm.PopupQuickViewVueModal.ProductPrice.Price = e.data.price : vm.PopupQuickViewVueModal.AssociatedProducts.find((e => e.Id === a)).ProductPrice.Price = e.data.price), e.data.sku && (vm.PopupQuickViewVueModal.Sku = e.data.sku), e.data.mpn && (vm.PopupQuickViewVueModal.Mpn = e.data.mpn), e.data.gtin && (vm.PopupQuickViewVueModal.Gtin = e.data.gtin), e.data.stockAvailability && (vm.PopupQuickViewVueModal.StockAvailability = e.data.stockAvailability), e.data.enabledattributemappingids) for (var t = 0; t < e.data.enabledattributemappingids.length; t++)document.querySelector("#product_attribute_label_" + e.data.enabledattributemappingids[t]).style.display = "table-cell", document.querySelector("#product_attribute_input_" + e.data.enabledattributemappingids[t]).style.display = "table-cell"; if (e.data.disabledattributemappingids) for (t = 0; t < e.data.disabledattributemappingids.length; t++)document.querySelector("#product_attribute_label_" + e.data.disabledattributemappingids[t]).style.display = "none", document.querySelector("#product_attribute_input_" + e.data.disabledattributemappingids[t]).style.display = "none"; null !== e.data.pictureDefaultSizeUrl && (vm.PopupQuickViewVueModal.DefaultPictureModel.ImageUrl = e.data.pictureDefaultSizeUrl) } })) }, uploadFile: function (e) { var t = new FormData, a = e.getAttribute("data-url"); t.append("image", qqfile.files[0]), axios.post(a, t, { headers: { "Content-Type": "multipart/form-data" } }).then((function (t) { if (t.data.success) { var a = t.data.message, o = t.data.downloadGuid, i = t.data.downloadUrl, r = document.querySelector(".download-file"), d = document.getElementById("download-message"); e.setAttribute("qq-button-id", o), document.querySelector(".hidden-upload-input").value = o, d.style.display = "block", d.classList.remove("alert-danger"), d.classList.add("alert-info"), d.innerText = a, r.style.display = "block", r.children[0].setAttribute("href", i) } else { a = t.data.message; (d = document.getElementById("download-message")).style.display = "block", d.classList.remove("alert-info"), d.classList.add("alert-danger"), d.innerText = a } })) }, initReservationQV: function () { if (null !== vm.PopupQuickViewVueModal && 20 == vm.PopupQuickViewVueModal.ProductType) { var e = vm.PopupQuickViewVueModal.Id, t = vm.PopupQuickViewVueModal.ReservationFullDate, a = vm.PopupQuickViewVueModal.ReservationYear, o = vm.PopupQuickViewVueModal.ReservationMonth; Reservation.init(t, a, o, "No available reservations", "/Product/GetDatesForMonth", e, "/product/productdetails_attributechange?productId=" + e) } }, getLinkedProductsQV: function (e) { axios({ url: "/Product/RelatedProducts", method: "get", params: { productId: e }, headers: { Accept: "application/json", "Content-Type": "application/json" } }).then((function (e) { vm.RelatedProducts = e.data })) }, warehouse_change_handler(e, t) { var a = new FormData; a.append("warehouseId", document.getElementById("WarehouseId").value), a.append("productId", e), axios({ url: t, data: a, method: "post" }).then((function (e) { e.data.stockAvailability && (vm.PopupQuickViewVueModal.StockAvailability = e.data.stockAvailability) })) }, formatDate(e) { var t = new Date(e), a = "" + (t.getMonth() + 1), o = "" + t.getDate(), i = t.getFullYear(); return a.length < 2 && (a = "0" + a), o.length < 2 && (o = "0" + o), [a, o, i].join("/") }, QuickViewShown: function () { var e, t; vm.PopupQuickViewVueModal.ProductAttributes.length > 0 ? vm.attrchange(vm.PopupQuickViewVueModal.Id, !0) : vm.PopupQuickViewVueModal.ProductBundleModels.length > 0 && vm.attrchange(vm.PopupQuickViewVueModal.Id, !0); 20 == vm.PopupQuickViewVueModal.ProductType && (10 == vm.PopupQuickViewVueModal.IntervalUnit ? (null !== vm.PopupQuickViewVueModal.RentalStartDateUtc && (e = this.formatDate(vm.PopupQuickViewVueModal.RentalStartDateUtc), vm.PopupQuickViewVueModal.RentalStartDateUtc = e), null !== vm.PopupQuickViewVueModal.RentalEndDateUtc && (t = this.formatDate(vm.PopupQuickViewVueModal.RentalEndDateUtc), vm.PopupQuickViewVueModal.RentalEndDateUtc = t)) : null !== vm.PopupQuickViewVueModal.RentalStartDateUtc ? vm.PopupQuickViewVueModal.RentalStartDateUtc = this.formatDate(vm.PopupQuickViewVueModal.RentalStartDateUtc) : vm.PopupQuickViewVueModal.RentalStartDateUtc = null) } } });